<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Malawi News Aggregator</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
font-family:'Inter',sans-serif;
background:
radial-gradient(circle at 20% 20%, rgba(51,158,53,0.08), transparent 40%),
radial-gradient(circle at 80% 0%, rgba(206,17,38,0.08), transparent 40%),
#f6f8fa;
color:#111;
min-height:100vh;
display:flex;
flex-direction:column;
}

header{
background:linear-gradient(135deg,#111,#1e1e1e);
color:white;
padding:3rem 1rem;
text-align:center;
position:relative;
overflow:hidden;
}
header::after{
content:'';
position:absolute;
width:600px;
height:600px;
background:radial-gradient(circle, rgba(51,158,53,0.15), transparent 70%);
top:-200px;
right:-200px;
}
.header-content{position:relative;z-index:1}
h1{font-size:2.4rem;font-weight:700}
h1 span:first-child{color:#CE1126}
h1 span:last-child{color:#339E35}
.subtitle{margin-top:.5rem;opacity:.8}

main{
max-width:1200px;
margin:2rem auto;
padding:0 1rem;
flex:1;
}

/* HERO */
.hero{
background:white;
border-radius:20px;
padding:2rem;
margin-bottom:2rem;
box-shadow:0 15px 40px rgba(0,0,0,.08);
display:none;
}
.hero h2{
font-size:1.5rem;
margin-bottom:1rem;
}
.hero .meta{
font-size:.8rem;
color:#6b7280;
margin-bottom:1rem;
}
.hero a{
color:#339E35;
font-weight:600;
text-decoration:none;
}
.hero a:hover{opacity:.8}

/* FILTER */
.filter-bar{
display:flex;
flex-wrap:wrap;
gap:.5rem;
margin-bottom:2rem;
justify-content:center;
}
.filter-btn{
padding:.45rem 1rem;
border-radius:999px;
border:1px solid #e5e7eb;
background:white;
cursor:pointer;
font-size:.8rem;
transition:.2s;
}
.filter-btn:hover{
background:#339E35;
color:white;
border-color:#339E35;
}
.filter-btn.active{
background:#339E35;
color:white;
}

/* GRID */
.news-grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
gap:1.5rem;
}

/* CARD */
.news-card{
background:rgba(255,255,255,.75);
backdrop-filter:blur(12px);
border-radius:16px;
padding:1.5rem;
box-shadow:0 8px 24px rgba(0,0,0,.06);
display:flex;
flex-direction:column;
gap:.7rem;
transition:.25s;
}
.news-card:hover{
transform:translateY(-6px);
box-shadow:0 18px 40px rgba(0,0,0,.12);
}
.card-meta{
font-size:.75rem;
color:#6b7280;
display:flex;
justify-content:space-between;
}
.card-title{
font-weight:700;
font-size:1rem;
}
.card-title a{
color:#111;
text-decoration:none;
}
.card-title a:hover{
color:#339E35;
}
.summary{
font-size:.85rem;
color:#6b7280;
flex:1;
}
.read-more{
font-size:.8rem;
font-weight:600;
color:#339E35;
text-decoration:none;
}
.read-more:hover{opacity:.8}

footer{
background:#111;
color:rgba(255,255,255,.6);
text-align:center;
padding:1.5rem;
font-size:.8rem;
}
</style>
</head>

<body>

<header>
<div class="header-content">
<h1><span>Malawi</span> News <span>Aggregator</span></h1>
<p class="subtitle">Latest headlines from major Malawi news sources</p>
</div>
</header>

<main>

<div id="hero" class="hero"></div>

<div id="filter-bar" class="filter-bar"></div>

<div id="news-container" class="news-grid"></div>

</main>

<footer>
Malawi News Aggregator • RSS Powered • 2026
</footer>

<script>
const CONFIG={
jsonFile:'malawi_news.json',
maxSummary:160
};

const SITES = [
"Nyasa Times",
"Malawi 24",
"Face of Malawi",
"Malawi Voice",
"Maravi Express",
"Times 360 Malawi / Times Group",
"Nation Online (The Nation)",
"Malawi News Agency (MANA)",
"Maravi Post",
"Zodiak Malawi",
"Capital FM Malawi",
"Focus Malawi",
"Biz Malawi",
"Business Malawi",
"The Daily Times / Times Group",
"The Nation Malawi"
];

let allArticles=[];

/* CREATE FILTER BUTTONS */
function createFilters(){
const bar=document.getElementById('filter-bar');
bar.innerHTML='<button class="filter-btn active" data-filter="all">All</button>';
SITES.forEach(site=>{
bar.innerHTML+=`<button class="filter-btn" data-filter="${site}">${site}</button>`;
});
document.querySelectorAll('.filter-btn').forEach(btn=>{
btn.addEventListener('click',()=>{
document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
btn.classList.add('active');
const filter=btn.dataset.filter;
if(filter==='all') render(allArticles);
else render(allArticles.filter(a=>a.source===filter));
});
});
}

/* HERO */
function renderHero(article){
const hero=document.getElementById('hero');
hero.style.display='block';
hero.innerHTML=`
<h2>${article.title}</h2>
<div class="meta">${article.source} • ${formatDate(article.published)}</div>
<p>${truncate(article.summary,250)}</p>
<br>
<a href="${article.link}" target="_blank">Read full article →</a>
`;
}

/* HELPERS */
function truncate(text,len){
if(!text) return '';
return text.length>len?text.substring(0,len)+'...':text;
}
function formatDate(dateStr){
const date=new Date(dateStr);
return isNaN(date)?'—':date.toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'});
}

/* CARD */
function createCard(article){
return `
<article class="news-card">
<div class="card-meta">
<span>${article.source}</span>
<span>${formatDate(article.published)}</span>
</div>
<h3 class="card-title">
<a href="${article.link}" target="_blank">${article.title}</a>
</h3>
<p class="summary">${truncate(article.summary,CONFIG.maxSummary)}</p>
<a href="${article.link}" target="_blank" class="read-more">Read →</a>
</article>
`;
}

/* RENDER */
function render(articles){
const container=document.getElementById('news-container');
if(!articles.length){
container.innerHTML='<p>No articles found.</p>';
return;
}
const sorted=articles.sort((a,b)=>new Date(b.published)-new Date(a.published));
renderHero(sorted[0]);
container.innerHTML=sorted.slice(1).map(createCard).join('');
}

/* FETCH */
async function fetchNews(){
try{
const res=await fetch(CONFIG.jsonFile);
const data=await res.json();
allArticles=data;
render(data);
}catch{
document.getElementById('news-container').innerHTML='<p>Error loading news.</p>';
}
}

document.addEventListener('DOMContentLoaded',()=>{
createFilters();
fetchNews();
});
</script>

</body>
</html>
