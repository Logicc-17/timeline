<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Malawi News Aggregator</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

:root{
--malawi-red:#CE1126;
--malawi-green:#339E35;
--malawi-black:#111;
--bg:#f6f8fa;
--text:#111;
--muted:#6b7280;
--border:#e5e7eb;
--radius:16px;
--max:1200px;
}

body{
font-family:'Inter',sans-serif;
background:
radial-gradient(circle at 20% 20%, rgba(51,158,53,0.08), transparent 40%),
radial-gradient(circle at 80% 0%, rgba(206,17,38,0.08), transparent 40%),
var(--bg);
color:var(--text);
min-height:100vh;
display:flex;
flex-direction:column;
}

/* ===== HEADER ===== */
header{
background:linear-gradient(135deg,#111,#1e1e1e);
color:white;
padding:3rem 1rem;
text-align:center;
position:relative;
overflow:hidden;
}

header::after{
content:'';
position:absolute;
width:600px;
height:600px;
background:radial-gradient(circle, rgba(51,158,53,0.15), transparent 70%);
top:-200px;
right:-200px;
}

.header-content{position:relative;z-index:1}

h1{
font-size:clamp(1.8rem,5vw,2.8rem);
font-weight:700;
letter-spacing:-0.02em;
}

h1 span:first-child{color:var(--malawi-red)}
h1 span:last-child{color:var(--malawi-green)}

.subtitle{
margin-top:.5rem;
opacity:.8;
font-size:.95rem;
}

/* ===== MAIN ===== */
main{
max-width:var(--max);
margin:2rem auto;
padding:0 1rem;
flex:1;
}

/* FILTER */
.filter-bar{
display:flex;
gap:.75rem;
justify-content:center;
flex-wrap:wrap;
margin-bottom:2rem;
}

.filter-btn{
padding:.5rem 1.2rem;
border-radius:999px;
border:1px solid var(--border);
background:white;
cursor:pointer;
font-weight:500;
transition:all .2s ease;
}

.filter-btn:hover{
background:var(--malawi-green);
color:white;
border-color:var(--malawi-green);
}

.filter-btn.active{
background:var(--malawi-green);
color:white;
}

/* GRID */
.news-grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
gap:1.5rem;
}

/* CARD */
.news-card{
background:rgba(255,255,255,.75);
backdrop-filter:blur(14px);
border-radius:var(--radius);
border:1px solid rgba(0,0,0,.05);
padding:1.5rem;
display:flex;
flex-direction:column;
gap:.75rem;
transition:all .25s ease;
box-shadow:0 8px 24px rgba(0,0,0,.06);
opacity:0;
transform:translateY(10px);
animation:fadeIn .5s ease forwards;
}

.news-card:hover{
transform:translateY(-6px);
box-shadow:0 18px 40px rgba(0,0,0,.12);
border-color:rgba(51,158,53,.4);
}

@keyframes fadeIn{
to{opacity:1;transform:translateY(0)}
}

.card-meta{
display:flex;
justify-content:space-between;
font-size:.75rem;
color:var(--muted);
}

.source{
font-weight:600;
text-transform:uppercase;
}

.card-title{
font-weight:700;
font-size:1.1rem;
line-height:1.4;
}

.card-title a{
color:var(--text);
text-decoration:none;
}

.card-title a:hover{
color:var(--malawi-green);
text-decoration:underline;
text-underline-offset:4px;
}

.summary{
font-size:.9rem;
color:var(--muted);
flex:1;
}

.read-more{
margin-top:.5rem;
font-weight:600;
font-size:.85rem;
color:var(--malawi-green);
text-decoration:none;
}

.read-more:hover{
opacity:.8;
}

/* STATUS */
.status{
text-align:center;
padding:3rem;
color:var(--muted);
}

/* FOOTER */
footer{
background:#111;
color:rgba(255,255,255,.6);
text-align:center;
padding:1.5rem;
font-size:.8rem;
}
</style>
</head>

<body>

<header>
<div class="header-content">
<h1><span>Malawi</span> News <span>Aggregator</span></h1>
<p class="subtitle">Latest headlines from major Malawi news sources</p>
</div>
</header>

<main>

<div class="filter-bar">
<button class="filter-btn active" data-filter="all">All</button>
<button class="filter-btn" data-filter="Nyasa Times">Nyasa Times</button>
<button class="filter-btn" data-filter="Malawi 24">Malawi 24</button>
<button class="filter-btn" data-filter="Nation Online">Nation Online</button>
</div>

<div id="news-container" class="news-grid">
<div class="status">Loading Malawi news...</div>
</div>

</main>

<footer>
Personal project • Data from public RSS feeds • 2026
</footer>

<script>
const CONFIG={
jsonFile:'malawi_news.json',
maxSummary:160
};

let allArticles=[];

function truncate(text,len){
if(!text) return '';
return text.length>len?text.substring(0,len)+'...':text;
}

function formatDate(dateStr){
const date=new Date(dateStr);
return isNaN(date)?'—':date.toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'});
}

function createCard(article,index){
return `
<article class="news-card" style="animation-delay:${index*70}ms">
<div class="card-meta">
<span class="source">${article.source}</span>
<span>${formatDate(article.published)}</span>
</div>
<h2 class="card-title">
<a href="${article.link}" target="_blank">${article.title}</a>
</h2>
<p class="summary">${truncate(article.summary,CONFIG.maxSummary)}</p>
<a href="${article.link}" target="_blank" class="read-more">Read full article →</a>
</article>`;
}

function render(articles){
const container=document.getElementById('news-container');
if(!articles.length){
container.innerHTML='<div class="status">No articles found.</div>';
return;
}
container.innerHTML=articles
.sort((a,b)=>new Date(b.published)-new Date(a.published))
.map(createCard)
.join('');
}

async function fetchNews(){
try{
const res=await fetch(CONFIG.jsonFile);
const data=await res.json();
allArticles=data;
render(data);
}catch(e){
document.getElementById('news-container').innerHTML=
'<div class="status">Error loading news. Check JSON file.</div>';
}
}

document.querySelectorAll('.filter-btn').forEach(btn=>{
btn.addEventListener('click',()=>{
document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
btn.classList.add('active');
const filter=btn.dataset.filter;
if(filter==='all') render(allArticles);
else render(allArticles.filter(a=>a.source===filter));
});
});

document.addEventListener('DOMContentLoaded',fetchNews);
</script>

</body>
</html>
